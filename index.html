<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>CPS E-MobilitÃ¤ts-Simulation â€“ Vom Windrad zum Fahrzeug</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body>
  <div id="container">
    <aside id="infoBox">
      <h2>ðŸ§  Systemstatus</h2>
      <p id="infoText">Simulation startet...</p>
      <div id="socBox">
        <div id="socLabel">SoC: 20%</div>
        <div id="socBar"><div id="socFill"></div></div>
      </div>
    </aside>

    <main>
      <svg id="diagram" viewBox="0 0 1400 800">

        <defs>
          <marker id="arrow" markerWidth="10" markerHeight="7" refX="8" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#00d9ff" />
          </marker>
        </defs>

        <!-- EV -->
        <circle id="ev" cx="250" cy="600" r="25" fill="#ccc" stroke="#00d9ff" stroke-width="2"></circle>
        <text x="250" y="605" class="evLabel">EV</text>

        <!-- MQTT Broker -->
        <rect id="mqtt" class="node" x="500" y="350" width="180" height="70"/>
        <text x="590" y="385" class="label">MQTT-Broker</text>
        <text x="590" y="400" class="sublabel">Kommunikation</text>

        <!-- Central Controller -->
        <rect id="cc" class="node" x="800" y="350" width="220" height="70"/>
        <text x="910" y="385" class="label">Zentraler Controller</text>

        <!-- Charging Clusters -->
        <rect id="c1" class="node" x="1150" y="150" width="180" height="60"/>
        <text x="1240" y="185" class="label">Cluster A</text>

        <rect id="c2" class="node" x="1150" y="270" width="180" height="60"/>
        <text x="1240" y="305" class="label">Cluster B</text>

        <rect id="c3" class="node" x="1150" y="390" width="180" height="60"/>
        <text x="1240" y="425" class="label">Cluster C</text>

        <rect id="c4" class="node" x="1150" y="510" width="180" height="60"/>
        <text x="1240" y="545" class="label">Cluster D</text>

        <!-- Arrows -->
        <path id="ev_mqtt" class="arrow" d="M250,600 L500,385" marker-end="url(#arrow)"/>
        <path id="mqtt_cc" class="arrow" d="M680,385 L800,385" marker-end="url(#arrow)"/>
        <path id="cc_clusters" class="arrow" d="M1020,385 L1150,180" marker-end="url(#arrow)"/>
        <path id="cc_clusters2" class="arrow" d="M1020,385 L1150,300" marker-end="url(#arrow)"/>
        <path id="cc_clusters3" class="arrow" d="M1020,385 L1150,420" marker-end="url(#arrow)"/>
        <path id="cc_clusters4" class="arrow" d="M1020,385 L1150,540" marker-end="url(#arrow)"/>
        <path id="clusters_cc" class="arrow" d="M1150,540 L800,385" marker-end="url(#arrow)"/>
        <path id="cc_ev" class="arrow" d="M800,385 L250,600" marker-end="url(#arrow)"/>

      </svg>
    </main>
  </div>

  <footer>Â© 2026 CPS Simulation â€“ Visualisierung des Energieflusses</footer>
  <script src="script.js"></script>
</body>
</html>
