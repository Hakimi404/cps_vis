<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CPS Energiefluss â€“ VollstÃ¤ndige Simulation</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/MotionPathPlugin.min.js"></script>
</head>
<body>
  <header>
    <h1>CPS Energie- & E-MobilitÃ¤tsnetzwerk</h1>
    <p>Kontinuierliche Simulation des gesamten Prozesses â€“ vom Wind bis zum geladenen Fahrzeug</p>
  </header>

  <main>
    <svg id="diagram" viewBox="0 0 1400 800">
      <!-- ARROW MARKER -->
      <defs>
        <marker id="arrow" markerWidth="10" markerHeight="7" refX="8" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="#00ffff" />
        </marker>
      </defs>

      <!-- === NODES === -->
      <!-- ENERGY LAYER -->
      <rect id="wind" class="node" x="100" y="300" width="140" height="60" rx="10" ry="10"></rect>
      <text x="170" y="335" class="label">ğŸŒ¬ Windturbine</text>

      <rect id="grid" class="node" x="350" y="300" width="160" height="60" rx="10" ry="10"></rect>
      <text x="430" y="335" class="label">âš™ï¸ Netzsteuerung</text>

      <rect id="cons" class="node" x="600" y="160" width="160" height="60" rx="10" ry="10"></rect>
      <text x="680" y="195" class="label">ğŸ  Verbraucher</text>

      <rect id="ctrl" class="node" x="600" y="500" width="160" height="60" rx="10" ry="10"></rect>
      <text x="680" y="535" class="label">ğŸ§  Zentraler Controller</text>

      <!-- EVs -->
      <rect id="ev1" class="ev" x="850" y="470" width="80" height="40" rx="10" ry="10"></rect>
      <rect id="ev2" class="ev" x="850" y="530" width="80" height="40" rx="10" ry="10"></rect>
      <rect id="ev3" class="ev" x="850" y="590" width="80" height="40" rx="10" ry="10"></rect>
      <text x="890" y="650" class="label small">ğŸš— Elektrofahrzeuge</text>

      <!-- CHARGING CLUSTERS -->
      <rect id="cl1" class="cluster" x="1100" y="420" width="160" height="60" rx="10" ry="10"></rect>
      <text x="1180" y="455" class="label">ğŸ”‹ Ladecluster A</text>

      <rect id="cl2" class="cluster" x="1100" y="510" width="160" height="60" rx="10" ry="10"></rect>
      <text x="1180" y="545" class="label">ğŸ”‹ Ladecluster B</text>

      <!-- COMMUNICATION LAYER -->
      <text x="700" y="760" class="layer">ğŸ’¬ MQTT Kommunikation</text>
      <text x="700" y="785" class="layer">ğŸ§© OPC UA Verbindung</text>

      <!-- CONNECTIONS -->
      <path id="wind_grid" class="flow" d="M240,330 L350,330" />
      <path id="grid_cons" class="flow" d="M510,330 L600,190" />
      <path id="grid_ctrl" class="flow" d="M510,330 L600,530" />
      <path id="ctrl_ev1" class="flow" d="M760,520 L850,490" />
      <path id="ctrl_ev2" class="flow" d="M760,520 L850,550" />
      <path id="ctrl_ev3" class="flow" d="M760,520 L850,610" />
      <path id="ev1_cl1" class="opc" d="M930,490 L1100,450" />
      <path id="ev2_cl2" class="opc" d="M930,550 L1100,540" />
      <path id="ev3_cl1" class="opc" d="M930,610 L1100,460" />
    </svg>
  </main>

  <footer>
    <p>Â© 2026 CPS Simulation â€“ VollstÃ¤ndige Visualisierung des Energieflusses</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
